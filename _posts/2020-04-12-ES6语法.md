---
layout: post
title: ES6语法
date: 2020-04-12
categories: ES6语法
tags: ES6语法
---

​	刚开始用vue和react的童鞋肯定会接触到很多ES6的许多语法。但是ES6新增的语法辣么多，我们真的的要一下子全部学会么？学习语法本就是循序渐进的过程，此次我们就来学习一下最常用、最有用的ES6语法。

## 1、变量声明const和let

​	在ES6以前，我们都是用var关键字声明变量滴，这样滴发，变量无论声明在何处，都会被js解释器视为在函数的最顶部（如果是不在函数内即在全局作用域的最顶部）。这就是函数变量声明提升，如：

```javascript
  function aa() {
    if(flag) {
        var test = 'hello man'
    } else {
        console.log(test)
    }
  }
```

​	以上代码实际是：

```javascript
  function aa() {
    var test // 变量提升，函数最顶部
    if(flag) {
        test = 'hello man'
    } else {
        //此处访问 test 值为 undefined
        console.log(test)
    }
    //此处访问 test 值为 undefined
  }
```

​	所以无需关心flag的值是否为 `true` 或者`false`。实际上，无论如何`test` 都会被创建声明。这是因为ES6以前的JavaScript是没有作用域概念的。

​	接下来轮到ES6登场了：

​	我们通常用 `let` 和 `const` 来声明，`let` 表示**变量**、`const` 表示**常量**。`let` 和 `const` 都是块级作用域。怎么理解这个块级作用域？

1. 在一个函数内部

2. 在一个代码块内部

   说白了只要在**{}花括号内**的代码块即可以认为 `let` 和 `const` 的作用域。

   

   然后我们来看以下代码：

   ```jsx
     function aa() {
       if(flag) {
          let test = 'hello man'
       } else {
           //test 在此处访问不到
           console.log(test)
       }
     }
   ```

   

```jsx
  }
```

`let` 的作用域是在它所在当前代码块，但不会被提升到当前函数的最顶部。

再来说说 `const`
 `const` 声明的变量必须提供一个值，而且会被认为是常量，意思就是它的值被设置完成后就不能再修改了。

```csharp
    const name = 'lux'
    name = 'joe' // 再次赋值此时会报错
```

还有，如果 `const` 的是一个对象，对象所包含的值是可以被修改的。抽象一点儿说，就是对象所指向的地址不能改变，而变量成员是可以修改的。

```csharp
    const student = { name: 'cc' }
    // 没毛病
    student.name = 'yy'
    // 如果这样子就会报错了
    student  = { name: 'yy' }
```

说说TDZ(暂时性死区)，想必你早有耳闻。

```csharp
    {
        console.log(value) // 报错
        let value = 'lala'
    }
```

我们都知道，JS引擎扫描代码时，如果发现变量声明，用 `var` 声明变量时会将声明提升到函数或全局作用域的顶部。但是 `let` 或者 `const`，会将声明关进一个小黑屋也是TDZ(暂时性死区)，只有执行到变量声明这句语句时，变量才会从小黑屋被放出来，才能安全使用这个变量。

哦了，说一道面试题

```jsx
    var funcs = []
    for (var i = 0; i < 10; i++) {
        funcs.push(function() { console.log(i) })
    }
    funcs.forEach(function(func) {
        func()
    })
```

这样的面试题是大家很常见，很多同学一看就知道输出十次10  (什么？不知道为什么是10次10？当然是里面的`i`共享一个作用域内的变量了，设么?还不清楚么？不清楚的话就自己去恶补以下作用域知识吧)

好了，言归正传，但是如果我们想依次输出0到9呢？
有两种解决方法，直接看一下代码：

```jsx
    // ES5知识，我们可以利用“立即调用函数”解决这个问题
    var funcs = []
    for (var i = 0; i < 10; i++) {
        funcs.push(
          (function(value) {
            return function() {
                console.log(value)
            }
        })(i)
      )
    }
    funcs.forEach(function(func) {
        func()
    })
```

```jsx
  // 再来看看es6怎么处理的
    const funcs = []
    for (let i = 0; i < 10; i++) {
        funcs.push(function() {
            console.log(i)
        })
    }
    funcs.forEach(func => func())
```

达到相同的效果，ES6 简洁的解决方案是不是更让你心动！！！嘿嘿，（什么？不知道最后一行什么意思，兄台勿慌，稍后详细奉上）。

## 2、字符串

先聊聊我最喜欢的模板字符串😋
ES6模板字符简直是开发者的福音啊，解决了 ES5 在字符串拼接功能上的痛点（炒鸡爱）。


